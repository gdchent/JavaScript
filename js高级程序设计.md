# js高级程序设计阅读笔记

### 第一章 js的简介

js是一门专门为网页设计的脚本语言

###### 一 ：js的实现

1.ECMAscript组成：语法，类型，语句，关键字，保留字  操作符  对象。

什么是ECMAscript兼容：支持Unicode兼容，提供核心语言功能。

2.dom(文档对象模型) ：提供访问和操作网页内容和接口

3.bom(浏览器对象) ：提供跟浏览器交互的方法和接口 比如 navicator

二：js的版本

##### 第二章 在HTML中使用js

一： 使用<script>元素 该元素有6个属性

 1.async：可选。不是必须的表示应该立即下载脚本  只针src指向的外部js文件有效 ，对自己的包含无效。

2.charset：可选。

3.src  指向外部脚本js文件

4.defer  相当于window.onload属性 等文档全部加载完成的时候 再加载该js脚本  仅限外部使用

5 type      可选。可以看成是language的替代属性；表示编写代码使用的脚本语言的内容类型（也称为MIME类型）。虽然text/javascript和text/ecmascript都已经不被推荐使用

6 language   已废弃。原来用于表示编写代码使用的脚本语言。大多数浏览器会忽略这个属性，因此也没有必要在用了

######  注意：

带有src属性的<script>元素不应该在其<script>和\</script>中包含额外的js代码。

如果包含了嵌入的js代码，则只会下载并执行src指向的外部脚本文件，嵌入的代码会被忽略

为什么页面引入js的script标签要放在 body的最后面，是因为如果放置在head中，要先加载

js文件，然后再加载body中的html代码显示，就会导致页面出现一段时间的空白.

##### 第三章 基本数据类型

##### 一 ：Undefined

undefined :声明变量但是没有使用的时候就是undefined

例如 var message ; //undefined

###### 二：Null 

声明了一个变量 初始化的时候推荐给null

var message=null; 

type of message  //object

###### 三： Number类型

##### 1：基本数值字面量

可以保存 八进制  十进制  十六进制数

var num=0xA //16进制输出 10   

var  num=079   //输出79

八进制字面量在严格模式下是无效的，会导致js引擎抛出错误

##### 2：浮点数据类型

在js中永远不要测试浮点数,因为不准确

例如 0.1+0.2 >0.3   0.2+0.4>0.6  0.4+0.8>1.2   0.3+0.6<0.9

0.1+0.1=0.2

##### 3：数值范围

例如:Number.MAX_VALUE+Number.MAX_VALUE  //Ininity 正无穷  返回的结果就无法进行下一步运算

##### 4：NaN

什么是NaN它是一个Number类型的值，可以通过type of 来检测基本数据类型。

##### NaN有2个特点：

1.就是任何涉及NaN的+ - *  /操作的结果都是NaN

2.就是任何的NaN都是不相等的，包括NaN本身.

console.log(NaN==NaN)  //false

为了针对以上情况，ECMAScript定义了 isNaN函数，该函数接收了一个参数，该参数可以是任何类型，而函数会帮我们确定这个参数是不是数字.

isNaN(NaN)  //返回true 

isNaN('abc')  //也是返回true 为什么？因为字符串abc强转Number为NaN，所以这里返回true

isNaN('123')  //false   ‘123’  转化为数字123 

##### 特别注意：

总结：在js中，当一个对象要转化为数字的时候，首先会调用valueOf方法 ，这个时候返回了一个结果，如果这个值是原始值则返回，否则继续调用自己的toString方法。如果此时返回的还不是原始值则抛出错误.

###### 5 数值转换：

在js中有3个函数可以将其它类型的值转化为整型

方法1： parseInt()  //解析成整型,

方法2:通过包装类 Number('123')

方法3：parseFloat()  //转化成浮点数据类型

###### Number类型的转换规则如下：

如果是boolean  只有true跟false,分别转化为1跟0

如果是数字。只是简单的传入或者返回

如果是null   返回的是 0

如果是undefined 直接转化为NaN

如果是字符串要将字符串转化为数值类型规则如下：

第一种情况：如果字符串中 只包含数字，那么首先调用valueOf方法  直接转化为十进制数据

第二种情况：如果字符串中包含有浮点数据类型，那么则将其直接转化为浮点数据类型

第三种情况：如果包含有十六进制的数据时候，那么直接转化为相同大小的十进制数据

第四种情况：如果字符串是空的“ ” ，这个时候直接转化为0.

第五种情况：如果字符串中包含除上述格式之外的字符，则将其转换为NaN。

第六种情况：如果是对象，则调用对象的valueOf方法，然后依照前面的规则转换返回的值。如果转换的结果是NaN,则调用对象的toString方法，然后再次依照前面的规则转换返回的字符串值。

Number函数在转换字符串时比较复杂而且不够合理，因此在处理整数的时候更常用的是

parseInt函数

parseInt("")  //返回NaN

Number(" ")// 返回 0

##### 四：String类型

在js中字符串用双引号（”）或单引号(')都可以 不会有什么不同。

##### 字符串字面量

String数据类型包含一些特殊的字符字面量，也叫转义序列，用于表示非打印字符，或者具有其他用途的字符。这些字符字面量如下表所示：

![image](https://github.com/gdchent/web-practice/blob/master/assets/字符串字面量.png)

字符串的特点

在ECMAScript中的字符串是不可变的，也就是说，字符串一旦被创建，它们的值就不能改变。要改变某个变量保存的字符串，首先要销毁原来的字符串。

#####  js的逻辑操作符

举其中一个例子：

```javascript
<script type="text/javascript">
        //逻辑与 有一个不是boolean值的情况下 遵循以下原则
        var result = true && false;
        console.log('result', result); //输出 false 
        //逻辑与：只有2个同时为true的时候才为true
        const obj = {}
        var test2 = obj && false;
        console.log(test2)  //false
        var test3 = obj && true;
        console.log(test3); // true  如果第一个为对象 则返回第二个操作数

        //如果第一个数是字符串 返回第二个数
        var test4 = "string" && false
        console.log('test4', test4) // false

        //如果第二个数据是对象
        var test5 = true && {}
        console.log('test5', test5) // 输出  {}

        //如果第二个数据是字符串
        var test6 = true && 'abc';
        console.log('test6', test6) //输出 abc 
        //逻辑与  就是a和b2个同时满足的情况下 才为true 如果第一个为true 才对第二个值进行操作

        //如果第二个数是字符串 则返回第二个数
        var test7='字符串test7' ;
        console.log(false && test7) ;
        console.log(true && test7) ;

        //如果2个数同时为对象则返回第二个数
        //如果第一个操作数是null ,则返回null 
        // 如果第一个操作数是NaN，则返回NaN
        //如果第一个操作数是undefined,则返回underfined 

        //详情参见js高级程序设计 3.5.3 布尔操作符
        console.log(65/11)
        
```

... 总结：js高级程序设计第三章讲的基本数据类型，个人感觉要全部记清楚是一个非常头疼的问题，这个要靠平常实战项目开发的日积月累。

&& （逻辑与）：2个全部为true的时候才返回true. 如果有一个不为布尔值  可以看上面的示例代码，或者自己

在控制台输出测试。

个人在开发中一般会比较常用的是 逻辑非 强行转化为布尔值，因为安全不会报错,按照js高级程序设计上所说的也是，任何类型的数据都可以通过逻辑非转话为true或者false.不多说了，直接第四章走起。

##### 第四章 变量作用域和内存问题

###### 4.1基本数据类型和引用数据类型

6种基本数据类型：Undefined，Null,Boolean,Number,String,Symbol.基本数据类型也叫原始数据类型。

引用数据类型：对象,数组，Date等。type of用于检测是不是对象.

###### 注意: js跟Java这里有所不同，在Java中。字符串是引用数据类型。Java定义了一个String类。

###### 4.1.1动态属性

定义基本数据类型跟定义引用数据类型的方式是基本上相同的。但是在为变量进行赋值的时候，基本数据类型跟

引用数据类型的时候，两者是不同的。

###### 应用类型示例代码如下：

```javascript
var person=new Object() ;//创建一个对象
//为对象添加属性
person.name="张三" ;
console.log(person.name);//输出张三
```

以上代码创建了一个对象，然后将其保存在变量person中。然后我们为其添加了一个person的属性。

并将其字符串给了name这个属性。如果对象不被销毁，那么该属性name将一直存在。

###### 基本数据类型示例代码如下：

```javascript
//声明一个数
var name='张三';
name.age=36 ;
console.log(name.age);//输出undefined
```

###### 4.1.2 复制变量值

```javascript
var num1=5 ;
var num2=num1;
```

基本数据类型是复制值。如果是引用类型的话这里就是2个类型变量指向同一个地址，

这个跟Java没什么区别。

总之就是 对象存在于堆内存中，基本数据类型.

###### 4.1.3传递参数

基本数据类型传参情况:

```javascript
function addTen(num){ //函数参数num
    num+=10 ;
    return num;
}
var count=20 ; //定义一个变量
var result=addTen(count) ;
console.log(count) ;//输出 20 说明 基本数据类型传递参数不是按照引用传递
```

引用数据类型传参情况:

示例代码如下：

```javascript
function setName(obj){
    obj.name="zhangsan" ；
}
var person=new Person() ;
setName(person); //传入的是引用
console.log(person.name); // zhangsan
```

注意：这里的obj是引用地址值的拷贝

4.1.4检测类型

type of用来检测基本数据类型。type of检测函数会返回 ‘function’

type of检测对象没意义，用处不大，instanceof用来检测对象。

###### 4.2执行环境以及作用域

执行环境：定义变量或者函数有权访问其它数据，决定了各自的行为。  

每个执行环境都有一个与之关联的**变量对象**。在web浏览器中，**全局执行环境被认为是一个window对象**，**因此所有全局变量和函数都是作为window对象的属性和方法创建的**。当某个执行环境中的所有代码执行完毕后，该环境被销毁，保存在其中的所有变量和函数定义也随之销毁。

每个函数都有自己的**执行环境**。当执行流进入一个函数的时候，函数的环境就会被推入一个环境栈中。而在函数执行完之后，栈将其环境弹出，把控制权返回给之前的执行环境。

当代码在一个环境中执行时，会创建变量对象的一个**作用域链**。作用域链的作用是保证对执行环境有权访问的所有变量和函数的有序访问。作用域链的前端，始终指向当前执行代码所在的环境的变量对象。如果这个环境是函数，则将其**活动对象**作为变量对象。作用域链：简单的说就是先访问自己所在的执行环境，然后依次类推，如果还找不到就执行到全局作用域中去查找变量对象。

总之：外部执行环境无法访问到内部执行环境变量对象，而内部执行环境对象可以访问外部执行环境变量对象，

全局执行环境变量对象始终都是作用域的最后一个对象。

作用域链的最前端其实就是当前执行环境的作用域，最后端就是最外面的全局执行环境。

###### 垃圾收集

js跟Java一样具有自动回收垃圾机制，也就是说当前执行环境会负责管理代码执行过程中使用的内存。

1.标记清除法

2.引用计数法

